---
import ComponentWrapper from 'src/components/Wrapper.astro';
import {getPageDrupal} from 'src/api/procedures/cms/creators/page';
import MainHeader from 'src/components/MainHeader.astro';
import {Page} from 'src/api/procedures/cms/types';
const { slug } = Astro.params;
let page: Page|null = null;
if(!slug){
    return Astro.redirect('/404')
}
if(slug.startsWith('nl/') || slug.startsWith('en/')){
    page = await getPageDrupal({slug: slug, lang: slug.split("/")[0]});
}
else{
    page = await getPageDrupal({slug: slug, lang: ''});
}
if(!page){
    return Astro.redirect('/404')
}
---
{page &&
<html>
    <head>
        <title>{page.title!}</title>
        <meta charset="UTF-8">
    </head>
    <body>
        <MainHeader></MainHeader>
        <main class="mt-[144px]">
            { page.components &&
                    <Fragment>
                        {page.components.map((component)=>{
                            return <ComponentWrapper component={component}></ComponentWrapper>
                        })}
                    </Fragment>
            }
        </main>
    </body>
</html>
    }


<style is:global lang="scss">
  article {
    &:nth-of-type(odd){
      background: #EFEFEF;
    }
    &:nth-of-type(even){
      background: white;
    }
  }
</style>